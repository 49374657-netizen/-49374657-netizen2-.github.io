<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Estética: Cosecha Interior</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Inter:wght@300;400;500;700&family=Lora:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <!-- Chosen Palette: Cosecha Interior (Beige cálido como base, con Verde Fluvial, Marrón Terrenal y Azul Crepuscular como acentos temáticos) -->
    <!-- Application Structure Plan: Una página única centrada en la exploración sensorial de la vanguardia. La estructura de dos columnas permite al usuario interactuar con los elementos visuales (paleta) y auditivos (texturas, recuerdo) de forma independiente, creando una experiencia inmersiva y contemplativa. -->
    <!-- Visualization & Content Choices: Paleta: Muestras de color interactivas. Textura: Botones con retroalimentación auditiva sintetizada. Recuerdo Sonoro: Una combinación de animación en Canvas y sonido ambiental para una inmersión total. Se eligieron estas interacciones para que la página no solo describa la estética, sino que la demuestre. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F3EFEA;
            color: #3D352F;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2-H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .font-serif {
            font-family: 'Lora', serif;
        }
        .font-creative {
            font-family: 'Caveat', cursive;
        }
        .palette-color {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .palette-color:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .texture-box {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .texture-box:hover {
            transform: translateY(-5px);
        }
        .btn-primary {
            transition: all 0.2s ease-in-out;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(61, 53, 47,0.25);
        }
        .section-card {
            background-color: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(61, 53, 47, 0.08);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 8px 32px 0 rgba(61, 53, 47, 0.1);
        }
    </style>
</head>
<body class="antialiased">

    <main class="w-full">
        <section id="estetica" class="min-h-screen py-20 px-4 flex justify-center items-center bg-[#EAE5E0]">
            <div class="max-w-6xl w-full mx-auto">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-4 text-[#582f0e] font-serif">La Estética</h2>
                <p class="text-center text-lg mb-12 max-w-3xl mx-auto">La estética de la Cosecha Interior se nutre de los paisajes de la memoria y la geografía personal. No son solo elementos visuales, son estados de ánimo y sensaciones. Interactúa con ellos para descubrir su significado.</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                    <div class="section-card rounded-2xl p-8">
                        <h3 class="text-2xl font-bold mb-6 text-center font-serif">La Paleta Visual</h3>
                        <div id="palette-container" class="space-y-4">
                            <div class="palette-color p-6 rounded-lg cursor-pointer flex items-center justify-center" style="background-color: #3a5a40;" data-text="El <strong>verde fluvial</strong> es la calma de la naturaleza que persiste en la memoria.">
                                <span class="text-white font-bold text-2xl font-creative">Verde Fluvial</span>
                            </div>
                            <div class="palette-color p-6 rounded-lg cursor-pointer flex items-center justify-center" style="background-color: #582f0e;" data-text="El <strong>marrón terrenal</strong> es la calidez de lo familiar y lo tangible.">
                                <span class="text-white font-bold text-2xl font-creative">Marrón Terrenal</span>
                            </div>
                            <div class="palette-color p-6 rounded-lg cursor-pointer flex items-center justify-center" style="background-color: #485b73;" data-text="El <strong>azul crepuscular</strong> es el velo de la introspección que tiñe la atmósfera.">
                                 <span class="text-white font-bold text-2xl font-creative">Azul Crepuscular</span>
                            </div>
                        </div>
                        <p id="palette-text" class="mt-6 text-center text-xl h-24 transition-opacity duration-300 font-creative">Pasa el cursor sobre un color para revelar su estado de ánimo.</p>
                    </div>

                    <div class="section-card rounded-2xl p-8">
                         <h3 class="text-2xl font-bold mb-6 text-center font-serif">La Textura y el Sonido</h3>
                        <div class="mb-8">
                            <p class="font-semibold text-xl mb-4 text-center font-creative">Superficies que combinan lo orgánico y lo artificial:</p>
                            <div class="grid grid-cols-2 gap-4 text-center">
                                <div class="texture-box p-4 rounded-lg bg-gray-200 font-creative text-2xl" data-sound="suave" style="background: linear-gradient(to right, #e0e0e0, #f0f0f0);">Suave</div>
                                <div class="texture-box p-4 rounded-lg bg-gray-200 font-creative text-2xl" data-sound="rigido" style="background: linear-gradient(45deg, #d5d5d5 25%, transparent 25%), linear-gradient(-45deg, #d5d5d5 25%, transparent 25%); background-size: 20px 20px;">Rígido</div>
                                <div class="texture-box p-4 rounded-lg bg-gray-200 font-creative text-2xl" data-sound="liso" style="background: radial-gradient(circle, #ffffff 10%, transparent 10.5%), #e0e0e0; background-size: 30px 30px;">Liso</div>
                                <div class="texture-box p-4 rounded-lg bg-gray-200 font-creative text-2xl" data-sound="plastificado" style="background-image: linear-gradient(135deg, #f0f0f0 25%, #d5d5d5 25%, #d5d5d5 50%, #f0f0f0 50%, #f0f0f0 75%, #d5d5d5 75%, #d5d5d5 100%); background-size: 40px 40px;">Plastificado</div>
                            </div>
                        </div>
                        <div>
                             <p class="font-semibold text-xl mb-4 text-center font-creative">El sonido como un manto protector:</p>
                             <div class="relative h-48 w-full bg-slate-800 rounded-lg overflow-hidden">
                                <canvas id="hailstorm-canvas"></canvas>
                             </div>
                             <button id="sound-button" class="w-full mt-4 bg-[#485b73] text-white font-bold py-2 px-4 rounded-full btn-primary">Evocar el recuerdo</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const paletteContainer = document.getElementById('palette-container');
            const paletteText = document.getElementById('palette-text');
            const originalPaletteText = paletteText.innerHTML;

            paletteContainer.querySelectorAll('.palette-color').forEach(el => {
                el.addEventListener('mouseover', () => {
                    paletteText.innerHTML = el.dataset.text;
                    paletteText.style.opacity = '1';
                });
            });

            paletteContainer.addEventListener('mouseout', () => {
                paletteText.innerHTML = originalPaletteText;
                paletteText.style.opacity = '1';
            });
            
            const soundButton = document.getElementById('sound-button');
            const canvas = document.getElementById('hailstorm-canvas');
            const ctx = canvas.getContext('2d');
            let animationFrameId;
            let hails = [];

            function resizeCanvas() {
                const container = canvas.parentElement;
                if (!container) return;
                canvas.width = container.clientWidth;
                canvas.height = container.clientHeight;
            }

            function createHail() {
                return {
                    x: Math.random() * canvas.width,
                    y: -10,
                    size: Math.random() * 3 + 1,
                    speed: Math.random() * 4 + 2
                };
            }

            function draw() {
                if (!ctx) return;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                hails.forEach(hail => {
                    ctx.beginPath();
                    ctx.arc(hail.x, hail.y, hail.size, 0, Math.PI * 2);
                    ctx.fill();
                });
            }

            function update() {
                hails.forEach(hail => {
                    hail.y += hail.speed;
                    if (hail.y > canvas.height) {
                        hail.y = -10;
                        hail.x = Math.random() * canvas.width;
                    }
                });
            }

            function animate() {
                update();
                draw();
                animationFrameId = requestAnimationFrame(animate);
            }
            
            let audioInitialized = false;
            let synths = {};

            function initializeAudio() {
                if (audioInitialized) return;
                
                Tone.start();

                synths.suave = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.2, decay: 0.1, sustain: 0.3, release: 0.5 } }).toDestination();
                synths.rigido = new Tone.NoiseSynth({ noise: { type: 'white' }, envelope: { attack: 0.005, decay: 0.1, sustain: 0 } }).toDestination();
                synths.liso = new Tone.MonoSynth({ oscillator: { type: 'sawtooth' }, filter: { Q: 2, type: 'lowpass', rolloff: -24 }, envelope: { attack: 0.01, decay: 0.1, sustain: 0.2, release: 0.2 }, filterEnvelope: { attack: 0.06, decay: 0.2, sustain: 0.5, release: 2, baseFrequency: 200, octaves: 4 } }).toDestination();
                synths.plastificado = new Tone.MembraneSynth({ pitchDecay: 0.08, octaves: 5, oscillator: { type: 'sine' }, envelope: { attack: 0.001, decay: 0.2, sustain: 0.01, release: 0.4 } }).toDestination();

                const gain = new Tone.Gain(0.4).toDestination();
                synths.rainNoise = new Tone.Noise("pink").connect(gain);
                synths.rainNoise.volume.value = -12;
                synths.hailSynth = new Tone.MembraneSynth({ pitchDecay: 0.05, octaves: 4, envelope: { attack: 0.001, decay: 0.4, sustain: 0.01, release: 1.4 } }).connect(gain);
                synths.hailSynth.volume.value = -15;
                synths.hailLoop = new Tone.Loop(time => {
                    synths.hailSynth.triggerAttackRelease(['C1', 'G1', 'C2'][Math.floor(Math.random() * 3)], '8n', time);
                }, "16n");

                audioInitialized = true;
            }

            document.querySelectorAll('.texture-box').forEach(box => {
                box.addEventListener('click', () => {
                    initializeAudio();
                    const sound = box.dataset.sound;
                    if (synths[sound]) {
                        if (sound === 'suave') synths.suave.triggerAttackRelease('C4', '8n');
                        if (sound === 'rigido') synths.rigido.triggerAttackRelease('8n');
                        if (sound === 'liso') synths.liso.triggerAttackRelease('C3', '4n');
                        if (sound === 'plastificado') synths.plastificado.triggerAttackRelease('G4', '8n');
                    }
                });
            });

            soundButton.addEventListener('click', () => {
                initializeAudio();

                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    animationFrameId = null;
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    synths.rainNoise.stop();
                    synths.hailLoop.stop();
                    if (Tone.Transport.state === 'started') {
                        Tone.Transport.stop();
                        Tone.Transport.cancel();
                    }
                    
                    soundButton.textContent = 'Evocar el recuerdo';
                } else {
                    resizeCanvas();
                    if(hails.length === 0) {
                        for (let i = 0; i < 100; i++) {
                            hails.push(createHail());
                        }
                    }
                    animate();
                    
                    if (Tone.Transport.state !== 'started') {
                        Tone.Transport.start();
                    }
                    synths.rainNoise.start();
                    synths.hailLoop.start(0);

                    soundButton.textContent = 'Detener el recuerdo';
                }
            });

            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
        });
    </script>
</body>
</html>